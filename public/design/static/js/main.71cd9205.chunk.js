(this.webpackJsonpviews=this.webpackJsonpviews||[]).push([[0],{279:function(t,e,a){},280:function(t,e,a){},298:function(t,e){},300:function(t,e){},310:function(t,e){},312:function(t,e){},339:function(t,e){},340:function(t,e){},345:function(t,e){},347:function(t,e){},354:function(t,e){},373:function(t,e){},484:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(27),r=a.n(i),o=(a(278),a(279),a(132)),l=a(187),c=a(34),u=a(53),h=a(54),d=a(56),f=a(55),j=(a(280),a(104)),p=a(271),b=a(492),v=a(486),g=a(156),O=a(494),m=a(254),x=a.n(m),y=a(7),w=Object(g.c)((function(){return Object(y.jsx)(O.a,{style:{cursor:"grab",color:"#999"}})})),S=[{title:"#",dataIndex:"sort",width:30,render:function(){return Object(y.jsx)(w,{})}},{title:"Path",dataIndex:"path"},{title:"Method",dataIndex:"method",render:function(t,e){return Object(y.jsxs)(b.a,{style:{color:{GET:"#61affe",POST:"#49cc90",PUT:"#fca130",DELETE:"#F56C6C"}[t.toUpperCase()]},children:[" ",t.toUpperCase()," "]},e)}},{title:"Tag",dataIndex:"tag",render:function(t,e){return Object(y.jsx)(b.a,{color:"cyan",children:t.toUpperCase()},e)}},{title:"\u6982\u8981",dataIndex:"summary",ellipsis:!0},{title:"operation",dataIndex:"operation",render:function(t,e,a){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("a",{onClick:function(){return e.remove(a)},style:{marginRight:10,color:"#F56C6C"},children:"Delete"}),Object(y.jsx)("a",{onClick:function(){return e.edit(a)},children:"Edit"})]})}}],k=Object(g.b)((function(t){return Object(y.jsx)("tr",Object(c.a)({},t))})),C=Object(g.a)((function(t){return Object(y.jsx)("tbody",Object(c.a)({},t))})),I=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).onSortEnd=function(e){var a=e.oldIndex,n=e.newIndex,s=t.props.list;if(a!==n){var i=x()([].concat(s),a,n).filter((function(t){return!!t}));t.props.updateRows(i)}},t.DraggableContainer=function(e){return Object(y.jsx)(C,Object(c.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:t.onSortEnd},e))},t.DraggableBodyRow=function(e){e.className,e.style;var a=Object(p.a)(e,["className","style"]),n=t.props.list.findIndex((function(t){return t.index===a["data-row-key"]}));return Object(y.jsx)(k,Object(c.a)({index:n},a))},t}return Object(h.a)(a,[{key:"render",value:function(){return Object(y.jsx)("div",{style:{width:"100%"},children:Object(y.jsx)(v.a,{loading:this.props.loading,pagination:!1,dataSource:this.props.list,columns:S,rowKey:"index",components:{body:{wrapper:this.DraggableContainer,row:this.DraggableBodyRow}}})})}}]),a}(s.a.Component),T=a(489),R=a(37),E=a(495),V=a(490),M=a(488),D=a(491),F=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={form:null},t.handleOk=function(){var e=t.state.form.current.getFieldsValue(["title","version","host","description"]),a=e.title,n=e.version,s=e.host,i=e.description;t.props.setInfos({host:s,info:{title:a,version:n,description:i}}),t.setIsModalVisible(!1)},t.handleCancel=function(){t.setIsModalVisible(!1)},t}return Object(h.a)(a,[{key:"setIsModalVisible",value:function(t){this.props.setModalShow(t)}},{key:"componentDidMount",value:function(){this.state.form=s.a.createRef()}},{key:"render",value:function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(V.a,{title:"\u57fa\u7840\u4fe1\u606f",style:{top:20},visible:this.props.isShow,onOk:this.handleOk,onCancel:this.handleCancel,children:Object(y.jsxs)(M.a,{ref:this.state.form,labelCol:{span:4},wrapperCol:{span:17},layout:"horizontal",initialValues:{version:"1.0.0"},children:[Object(y.jsx)(M.a.Item,{label:"\u6807\u9898",name:"title",children:Object(y.jsx)(D.a,{placeholder:"\u63a5\u53e3\u6587\u6863"})}),Object(y.jsx)(M.a.Item,{label:"\u7248\u672c",name:"version",children:Object(y.jsx)(D.a,{placeholder:"\u7248\u672c"})}),Object(y.jsx)(M.a.Item,{label:"Prefix",name:"host",children:Object(y.jsx)(D.a,{placeholder:"\u8def\u5f84\u8bf7\u6c42\u524d\u7f00"})}),Object(y.jsx)(M.a.Item,{label:"\u63cf\u8ff0",name:"description",children:Object(y.jsx)(D.a.TextArea,{placeholder:"\u63cf\u8ff0\u4fe1\u606f"})})]})})})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.isShow){var a=t.infos,n=a.host,s=a.info,i=s.version,r=s.title,o=s.description;setTimeout((function(){var t;null===(t=e.form.current)||void 0===t||t.setFieldsValue({host:n,version:i,title:r,description:o})}),100)}return null}}]),a}(s.a.Component),P=T.a.Title,B=T.a.Paragraph,N=T.a.Text,U=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={isShow:!1},t}return Object(h.a)(a,[{key:"setModalShow",value:function(t){this.setState({isShow:t})}},{key:"render",value:function(){var t=this,e=this.props.infos,a=e.info,n=e.host;return Object(y.jsxs)("div",{style:{width:"100%"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(y.jsx)(P,{level:2,children:a.title}),Object(y.jsx)(R.a,{disabled:this.props.loading,size:"small",style:{marginLeft:"30px"},onClick:function(){return t.setState({isShow:!0})},icon:Object(y.jsx)(E.a,{})})]}),Object(y.jsxs)(N,{type:"secondary",children:["Version: ",a.version]}),Object(y.jsx)("br",{}),Object(y.jsxs)(N,{children:["[Base URL: ",n,"]"]}),Object(y.jsx)(B,{children:a.description}),Object(y.jsx)(F,{setModalShow:function(e){return t.setModalShow(e)},isShow:this.state.isShow,infos:this.props.infos,setInfos:this.props.setInfos})]})}}]),a}(s.a.Component),A=a(186),z=a.n(A),q=a(262),L=a(146),K=a(120),G=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={form:s.a.createRef()},t.handleCancel=function(){t.setIsModalVisible(!1)},t}return Object(h.a)(a,[{key:"setIsModalVisible",value:function(t){this.props.setModalShow(t)}},{key:"handleOk",value:function(){var t=Object(q.a)(z.a.mark((function t(){var e;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.state.form.current.validateFields();case 3:e=t.sent,this.props.setRows(Object(c.a)(Object(c.a)({},e),{},{index:Object(j.uniqueId)()})),this.state.form.current.resetFields(),this.setIsModalVisible(!1),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return");case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(V.a,{title:"\u63a5\u53e3\u6587\u4ef6",style:{top:20},visible:this.props.isShow,onOk:function(){return t.handleOk()},onCancel:this.handleCancel,children:Object(y.jsxs)(M.a,{ref:this.state.form,labelCol:{span:4},wrapperCol:{span:17},layout:"horizontal",initialValues:{method:"get",tag:"Default"},children:[Object(y.jsx)(M.a.Item,{label:"Path",name:"path",rules:[{required:!0,message:"\u8def\u7531\u5730\u5740"}],children:Object(y.jsx)(D.a,{placeholder:"\u8def\u7531\u5730\u5740"})}),Object(y.jsx)(M.a.Item,{label:"\u534f\u8bae",name:"method",children:Object(y.jsxs)(L.a.Group,{children:[Object(y.jsx)(L.a.Button,{value:"get",children:"GET"}),Object(y.jsx)(L.a.Button,{value:"post",children:"POST"}),Object(y.jsx)(L.a.Button,{value:"put",children:"PUT"}),Object(y.jsx)(L.a.Button,{value:"delete",children:"DELETE"})]})}),Object(y.jsx)(M.a.Item,{label:"Tag",name:"tag",rules:[{required:!0,message:"\u8def\u7531\u5730\u5740"}],children:Object(y.jsx)(K.a,{style:{width:120},children:this.props.tags.map((function(t,e){return Object(y.jsx)(K.a.Option,{value:t.name,children:t.name},e)}))})}),Object(y.jsx)(M.a.Item,{label:"\u6982\u8981",name:"summary",children:Object(y.jsx)(D.a.TextArea,{placeholder:"\u6982\u8981"})})]})})})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.isRouterEdit){var a=t.routerValues,n=a.method,s=a.path,i=a.tag,r=a.summary;e.form.current.setFieldsValue({method:n,path:s,tag:i,summary:r})}return null}}]),a}(s.a.Component),J=a(493),H=a(496),Q=a(497),W=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).inpRef=s.a.createRef(null),t.state={isEdit:!1,tagName:""},t}return Object(h.a)(a,[{key:"handleOk",value:function(){this.state.tagName&&this.props.setTags(this.state.tagName),this.setState({isEdit:!1})}},{key:"handleKeyDown",value:function(t){var e=t.keyCode,a=t.target;13===e&&a.value&&(this.props.setTags(a.value),this.setState({isEdit:!1,tagName:""}))}},{key:"handleBlur",value:function(t){var e=t.target;e.value&&this.props.setTags(e.value),this.setState({isEdit:!1,tagName:""})}},{key:"handleChange",value:function(t){this.setState({tagName:t.target.value})}},{key:"handleEdit",value:function(){var t=this;this.setState({isEdit:!0},(function(){return t.inpRef.current.focus()}))}},{key:"handleCheck",value:function(t,e){this.props.updateTagsStatus(t,e)}},{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{style:{width:"100%",display:"flex",marginBottom:"10px"},children:[this.props.tags.map((function(e,a){return Object(y.jsx)(J.a,{size:"small",content:Object(y.jsx)("a",{onClick:function(){return t.props.removeTag(a)},children:"remove"}),trigger:"hover",visible:e.visible,onVisibleChange:function(e){return t.props.tagVisibleChange(a,e)},children:Object(y.jsx)(R.a,{disabled:t.props.loading,type:e.focus&&"primary",size:"small",style:{marginRight:5},onClick:function(){return t.handleCheck(e,a)},children:e.name})},a)})),this.state.isEdit?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(D.a,{ref:this.inpRef,size:"small",onKeyDown:function(e){return t.handleKeyDown(e)},onBlur:function(e){return t.handleBlur(e)},placeholder:"tag name",onChange:function(e){return t.handleChange(e)},style:{width:80,marginRight:5}}),Object(y.jsx)(R.a,{disabled:this.props.loading,size:"small",onClick:function(){return t.handleOk()},icon:Object(y.jsx)(H.a,{style:{color:"#F56C6C"}})})]}):Object(y.jsx)(R.a,{disabled:this.props.loading,size:"small",onClick:function(){return t.handleEdit()},icon:Object(y.jsx)(Q.a,{style:{color:"#F56C6C"}})})]})}}]),a}(s.a.Component),X={swagger:"2.0",info:{description:"mock-server",version:"1.0.0",title:"\u63a5\u53e3\u6587\u6863"},host:"localhost:8090",schemes:["http"]},Y=a(266),Z=a(487),$=a(498),_=a(272),tt=a(499),et=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(u.a)(this,a),(t=e.call(this)).state={};var n="";return t.state={infos:X,isShow:!1,list:[],cacheTables:[],tags:[{name:"Default",focus:!0,visible:!1}],routerValues:null,isRouterEdit:!1,editRouterIndex:null,loading:!1,host:n},t}return Object(h.a)(a,[{key:"setModalShow",value:function(t){this.setState({isShow:t,isRouterEdit:!1,routerValues:null})}},{key:"removeRow",value:function(t){var e=this.state.list;e.splice(t,1);var a=e.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{index:t.index+Math.random().toString().substr(2,3)})}));this.setState({list:a,cacheTables:a})}},{key:"editRow",value:function(t){var e=this,a=this.state.list;this.setState({routerValues:a[t],isRouterEdit:!0,editRouterIndex:t},(function(){return e.setState({isShow:!0})}))}},{key:"setRows",value:function(t){var e=this,a=this.state,n=a.list,s=a.isRouterEdit,i=a.editRouterIndex;if(t.remove=function(t){return e.removeRow(t)},t.edit=function(t){return e.editRow(t)},s){n[i]=t;var r=n.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{index:t.index+Math.random().toString().substr(2,3)})}));this.setState({list:r,cacheTables:r})}else this.setState({list:[].concat(Object(l.a)(n),[t]),cacheTables:[].concat(Object(l.a)(n),[t])})}},{key:"setTags",value:function(t){var e=this.state.tags;e.push({name:t,focus:!0}),this.setState({tags:e})}},{key:"updateTagsStatus",value:function(t,e){var a=this.state,n=a.tags,s=a.cacheTables;n[e].focus=!n[e].focus;var i=n.filter((function(t){return t.focus})).map((function(t){return t.name})),r=[];s.forEach((function(t){i.includes(t.tag)&&r.push(Object(c.a)(Object(c.a)({},t),{},{index:Object(j.uniqueId)()}))})),this.setState({list:r,tags:n})}},{key:"removeTag",value:function(t){var e=this.state.tags;e.splice(t,1),this.setState({tags:e})}},{key:"tagVisibleChange",value:function(t,e){var a=this.state.tags;a[t].visible=e,this.setState({tags:a})}},{key:"updateRows",value:function(t){this.setState({list:t})}},{key:"setInfos",value:function(t){this.setState({infos:Object(c.a)(Object(c.a)({},this.state.infos),t)})}},{key:"handleDownload",value:function(){var t=this.state,e=t.infos,a=t.list,n=t.host,s=Object(c.a)(Object(c.a)({},e),{},{host:"".concat(n).concat(e.host),paths:{}});a.forEach((function(t){var e=t.path,a=t.method,n=t.tag,i=t.summary;s.paths[e]=Object(o.a)({},a,{summary:i,tags:[n],produces:["application/json"],parameters:[{}],responses:{}})}));var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,module.exports = "+JSON.stringify(s,null,"\t")),i.setAttribute("download","mock.js"),i.style.display="none",i.click()}},{key:"handleBeforeUpload",value:function(t){return this.setState({loading:!0}),Object(j.stringExtension)(t.name,".","js")?Promise.resolve():(Y.b.error("\u8bf7\u4e0a\u4f20js\u6587\u4ef6"),this.setState({loading:!1}),Promise.reject())}},{key:"handleUpload",value:function(t){if(t.file.status,"done"===t.file.status){this.setState({loading:!1});var e=t.file.response,a=e.ok,n=e.data;if(a){var s=n.swagger,i=n.info,r=n.schemes,o=n.paths,l=void 0===o?{}:o,c=[],u=new Set;for(var h in l){var d={path:h,index:Object(j.uniqueId)()};if(Object.hasOwnProperty.call(l,h)){var f=l[h];for(var p in f)if(Object.hasOwnProperty.call(f,p)){var b=f[p],v=b.tags,g=(b.produces,b.parameters,b.responses,b.summary);d.summary=g,d.method=p,d.tag=v[0],u.add(v[0])}}c.push(d)}var O=[];u.forEach((function(t){return O.push({name:t,focus:!0,visible:!1})})),this.setState({infos:{swagger:s,info:i,schemes:r},list:c,tags:O})}}else"error"===t.file.status&&(console.log("error"),this.setState({loading:!1}))}},{key:"render",value:function(){var t=this;return Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)("div",{className:"container-columns",children:[Object(y.jsxs)("div",{style:{display:"flex",position:"fixed",top:25,right:25},children:[Object(y.jsx)(Z.a,{beforeUpload:function(e){return t.handleBeforeUpload(e)},name:"file",method:"POST",previewFile:function(){return Promise.resolve(!1)},action:"".concat(this.state.host,"/upload"),onChange:function(e){return t.handleUpload(e)},children:Object(y.jsx)(R.a,{disabled:this.state.loading,type:"primary",icon:Object(y.jsx)($.a,{})})}),Object(y.jsx)(R.a,{disabled:this.state.loading||0===this.state.list.length,type:"primary",style:{marginLeft:10},icon:Object(y.jsx)(_.a,{}),onClick:function(){return t.handleDownload()}})]}),Object(y.jsx)(U,{loading:this.state.loading,infos:this.state.infos,setInfos:function(e){return t.setInfos(e)}}),Object(y.jsx)(W,{loading:this.state.loading,tags:this.state.tags,setTags:function(e){return t.setTags(e)},updateTagsStatus:function(e,a){return t.updateTagsStatus(e,a)},removeTag:function(e){return t.removeTag(e)},tagVisibleChange:function(e,a){return t.tagVisibleChange(e,a)}}),Object(y.jsx)(I,{loading:this.state.loading,updateRows:function(e){return t.updateRows(e)},list:this.state.list}),Object(y.jsx)(R.a,{disabled:this.state.loading,size:"small",type:"ghost",icon:Object(y.jsx)(tt.a,{style:{color:"rgba(255,255,255,0.9)"}}),onClick:function(){return t.setModalShow(!0)},style:{marginTop:"20px",width:"50px"}}),Object(y.jsx)(G,{list:this.state.list,tags:this.state.tags,setRows:function(e){return t.setRows(e)},setModalShow:function(e){return t.setModalShow(e)},isShow:this.state.isShow,isRouterEdit:this.state.isRouterEdit,routerValues:this.state.routerValues})]})})}}]),a}(s.a.Component);r.a.render(Object(y.jsx)(et,{}),document.getElementById("root"))}},[[484,1,2]]]);